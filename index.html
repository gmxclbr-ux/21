<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Блэкджек</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #0f4c0f 0%, #1a7a1a 100%);
            padding: 20px;
            color: white;
        }
        
        .container {
            background-color: rgba(0, 0, 0, 0.7);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            padding: 30px;
            text-align: center;
            max-width: 800px;
            width: 100%;
        }
        
        h1 {
            color: gold;
            margin-bottom: 20px;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .game-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            background-color: rgba(255, 255, 255, 0.1);
            padding: 10px 15px;
            border-radius: 10px;
        }
        
        .balance, .bet {
            font-size: 1.2rem;
            font-weight: bold;
        }
        
        .bet-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .bet-btn {
            padding: 8px 15px;
            background-color: gold;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s ease;
        }
        
        .bet-btn:hover {
            background-color: #ffd700;
            transform: scale(1.05);
        }
        
        .game-area {
            display: flex;
            flex-direction: column;
            gap: 30px;
            margin-bottom: 20px;
        }
        
        .dealer-area, .player-area {
            background-color: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
        }
        
        .area-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: gold;
        }
        
        .cards-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            min-height: 120px;
        }
        
        .card {
            width: 80px;
            height: 110px;
            background-color: white;
            border-radius: 5px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 5px;
            color: black;
            font-weight: bold;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
        }
        
        .card.red {
            color: red;
        }
        
        .card-back {
            background: linear-gradient(45deg, #b30000, #ff4d4d);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
        }
        
        .card-value {
            font-size: 1.2rem;
            text-align: center;
        }
        
        .card-top, .card-bottom {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        
        .card-bottom {
            align-items: flex-end;
            transform: rotate(180deg);
        }
        
        .score {
            margin-top: 10px;
            font-size: 1.2rem;
            font-weight: bold;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        button {
            padding: 12px 25px;
            font-size: 1rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: bold;
        }
        
        #hit-btn {
            background-color: #2ecc71;
            color: white;
        }
        
        #hit-btn:hover:not(:disabled) {
            background-color: #27ae60;
        }
        
        #stand-btn {
            background-color: #e74c3c;
            color: white;
        }
        
        #stand-btn:hover:not(:disabled) {
            background-color: #c0392b;
        }
        
        #deal-btn {
            background-color: #3498db;
            color: white;
        }
        
        #deal-btn:hover:not(:disabled) {
            background-color: #2980b9;
        }
        
        button:disabled {
            background-color: #7f8c8d;
            cursor: not-allowed;
            transform: none;
        }
        
        .message {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            font-size: 1.3rem;
            font-weight: bold;
            min-height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .win {
            background-color: rgba(46, 204, 113, 0.3);
            color: #2ecc71;
        }
        
        .lose {
            background-color: rgba(231, 76, 60, 0.3);
            color: #e74c3c;
        }
        
        .tie {
            background-color: rgba(241, 196, 15, 0.3);
            color: #f1c40f;
        }
        
        .rules {
            margin-top: 30px;
            text-align: left;
            background-color: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
        }
        
        .rules h3 {
            color: gold;
            margin-bottom: 10px;
        }
        
        .rules ul {
            padding-left: 20px;
        }
        
        .rules li {
            margin-bottom: 5px;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .card {
                width: 60px;
                height: 85px;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            button {
                width: 80%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Блэкджек</h1>
        
        <div class="game-info">
            <div class="balance">Баланс: $<span id="balance">1000</span></div>
            <div class="bet">Ставка: $<span id="current-bet">0</span></div>
        </div>
        
        <div class="bet-controls">
            <button class="bet-btn" data-bet="10">$10</button>
            <button class="bet-btn" data-bet="25">$25</button>
            <button class="bet-btn" data-bet="50">$50</button>
            <button class="bet-btn" data-bet="100">$100</button>
        </div>
        
        <div class="game-area">
            <div class="dealer-area">
                <div class="area-title">Дилер</div>
                <div class="cards-container" id="dealer-cards">
                    <!-- Карты дилера -->
                </div>
                <div class="score">Очки: <span id="dealer-score">0</span></div>
            </div>
            
            <div class="player-area">
                <div class="area-title">Игрок</div>
                <div class="cards-container" id="player-cards">
                    <!-- Карты игрока -->
                </div>
                <div class="score">Очки: <span id="player-score">0</span></div>
            </div>
        </div>
        
        <div class="controls">
            <button id="deal-btn">Раздать карты</button>
            <button id="hit-btn" disabled>Взять карту</button>
            <button id="stand-btn" disabled>Оставить</button>
        </div>
        
        <div class="message" id="message">
            Сделайте ставку и нажмите "Раздать карты"
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Элементы DOM
            const balanceElement = document.getElementById('balance');
            const currentBetElement = document.getElementById('current-bet');
            const dealerCardsContainer = document.getElementById('dealer-cards');
            const playerCardsContainer = document.getElementById('player-cards');
            const dealerScoreElement = document.getElementById('dealer-score');
            const playerScoreElement = document.getElementById('player-score');
            const dealBtn = document.getElementById('deal-btn');
            const hitBtn = document.getElementById('hit-btn');
            const standBtn = document.getElementById('stand-btn');
            const messageElement = document.getElementById('message');
            const betButtons = document.querySelectorAll('.bet-btn');
            
            // Игровые переменные
            let balance = 1000;
            let currentBet = 0;
            let deck = [];
            let dealerCards = [];
            let playerCards = [];
            let gameActive = false;
            
            // Масти карт
            const suits = ['hearts', 'diamonds', 'clubs', 'spades'];
            // Значения карт
            const values = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
            
            // Инициализация игры
            function initGame() {
                updateBalance();
                updateBetDisplay();
                enableBetButtons();
                dealBtn.disabled = currentBet === 0;
                hitBtn.disabled = true;
                standBtn.disabled = true;
                
                // Очищаем поле
                dealerCardsContainer.innerHTML = '';
                playerCardsContainer.innerHTML = '';
                dealerScoreElement.textContent = '0';
                playerScoreElement.textContent = '0';
                
                if (!gameActive) {
                    messageElement.textContent = currentBet === 0 
                        ? 'Сделайте ставку и нажмите "Раздать карты"' 
                        : 'Нажмите "Раздать карты" чтобы начать';
                    messageElement.className = 'message';
                }
            }
            
            // Создание колоды
            function createDeck() {
                deck = [];
                for (let suit of suits) {
                    for (let value of values) {
                        deck.push({ suit, value });
                    }
                }
                shuffleDeck();
            }
            
            // Перемешивание колоды
            function shuffleDeck() {
                for (let i = deck.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [deck[i], deck[j]] = [deck[j], deck[i]];
                }
            }
            
            // Раздача карт
            function dealCards() {
                if (currentBet === 0) {
                    messageElement.textContent = 'Сначала сделайте ставку!';
                    messageElement.className = 'message lose';
                    return;
                }
                
                // Создаем новую колоду и перемешиваем
                createDeck();
                
                // Очищаем карты
                dealerCards = [];
                playerCards = [];
                
                // Раздаем по две карты
                playerCards.push(drawCard());
                dealerCards.push(drawCard());
                playerCards.push(drawCard());
                dealerCards.push(drawCard());
                
                // Обновляем отображение
                renderCards();
                
                // Обновляем очки
                updateScores();
                
                // Активируем кнопки игры
                gameActive = true;
                dealBtn.disabled = true;
                hitBtn.disabled = false;
                standBtn.disabled = false;
                disableBetButtons();
                
                // Проверяем блэкджек
                checkBlackjack();
                
                messageElement.textContent = 'Ваш ход: возьмите карту или остановитесь';
                messageElement.className = 'message';
            }
            
            // Взять карту
            function hit() {
                if (!gameActive) return;
                
                playerCards.push(drawCard());
                renderCards();
                updateScores();
                
                // Проверяем перебор
                if (calculateScore(playerCards) > 21) {
                    endGame('Игрок перебрал! Дилер побеждает.');
                }
            }
            
            // Остановиться
            function stand() {
                if (!gameActive) return;
                
                // Дилер берет карты до 17
                while (calculateScore(dealerCards) < 17) {
                    dealerCards.push(drawCard());
                }
                
                renderCards(true); // Показываем все карты дилера
                updateScores();
                
                // Определяем победителя
                determineWinner();
            }
            
            // Определение победителя
            function determineWinner() {
                const playerScore = calculateScore(playerCards);
                const dealerScore = calculateScore(dealerCards);
                
                if (dealerScore > 21) {
                    endGame('Дилер перебрал! Вы победили!', true);
                } else if (playerScore > dealerScore) {
                    endGame('Вы победили!', true);
                } else if (playerScore < dealerScore) {
                    endGame('Дилер побеждает!');
                } else {
                    endGame('Ничья! Ставка возвращена.', false, true);
                }
            }
            
            // Завершение игры
            function endGame(message, playerWins = false, tie = false) {
                gameActive = false;
                
                if (playerWins) {
                    // Блэкджек оплачивается 3:2
                    const isBlackjack = playerCards.length === 2 && calculateScore(playerCards) === 21;
                    const winAmount = isBlackjack ? Math.floor(currentBet * 1.5) : currentBet;
                    
                    balance += winAmount + currentBet;
                    messageElement.className = 'message win';
                    message += isBlackjack ? ' Блэкджек! Выигрыш 3:2!' : ` Выигрыш: $${winAmount}`;
                } else if (tie) {
                    balance += currentBet;
                    messageElement.className = 'message tie';
                } else {
                    messageElement.className = 'message lose';
                }
                
                messageElement.textContent = message;
                currentBet = 0;
                
                // Обновляем UI
                initGame();
            }
            
            // Проверка на блэкджек
            function checkBlackjack() {
                const playerScore = calculateScore(playerCards);
                const dealerScore = calculateScore(dealerCards);
                
                if (playerScore === 21 && dealerScore === 21) {
                    endGame('Оба имеют блэкджек! Ничья.', false, true);
                } else if (playerScore === 21) {
                    endGame('Блэкджек! Вы победили!', true);
                } else if (dealerScore === 21) {
                    endGame('У дилера блэкджек! Дилер побеждает.');
                }
            }
            
            // Вычисление очков
            function calculateScore(cards) {
                let score = 0;
                let aces = 0;
                
                for (let card of cards) {
                    if (card.value === 'A') {
                        aces++;
                        score += 11;
                    } else if (['K', 'Q', 'J'].includes(card.value)) {
                        score += 10;
                    } else {
                        score += parseInt(card.value);
                    }
                }
                
                // Корректируем тузы, если перебор
                while (score > 21 && aces > 0) {
                    score -= 10;
                    aces--;
                }
                
                return score;
            }
            
            // Взять карту из колоды
            function drawCard() {
                return deck.pop();
            }
            
            // Отображение карт
            function renderCards(showAllDealerCards = false) {
                // Очищаем контейнеры
                dealerCardsContainer.innerHTML = '';
                playerCardsContainer.innerHTML = '';
                
                // Карты дилера
                dealerCards.forEach((card, index) => {
                    if (index === 0 && !showAllDealerCards && gameActive) {
                        // Первая карта дилера скрыта
                        createCardElement(dealerCardsContainer, true);
                    } else {
                        createCardElement(dealerCardsContainer, false, card);
                    }
                });
                
                // Карты игрока
                playerCards.forEach(card => {
                    createCardElement(playerCardsContainer, false, card);
                });
                
                // Обновляем очки
                updateScores(showAllDealerCards);
            }
            
            // Создание элемента карты
            function createCardElement(container, isHidden, card = null) {
                const cardElement = document.createElement('div');
                cardElement.className = 'card' + (isHidden ? ' card-back' : '');
                
                if (!isHidden) {
                    // Определяем цвет карты (красный для червей и бубен)
                    const isRed = card.suit === 'hearts' || card.suit === 'diamonds';
                    if (isRed) cardElement.classList.add('red');
                    
                    // Верх карты
                    const topElement = document.createElement('div');
                    topElement.className = 'card-top';
                    topElement.innerHTML = `<div>${card.value}</div><div>${getSuitSymbol(card.suit)}</div>`;
                    
                    // Центр карты
                    const valueElement = document.createElement('div');
                    valueElement.className = 'card-value';
                    valueElement.textContent = card.value;
                    
                    // Низ карты
                    const bottomElement = document.createElement('div');
                    bottomElement.className = 'card-bottom';
                    bottomElement.innerHTML = `<div>${card.value}</div><div>${getSuitSymbol(card.suit)}</div>`;
                    
                    cardElement.appendChild(topElement);
                    cardElement.appendChild(valueElement);
                    cardElement.appendChild(bottomElement);
                } else {
                    cardElement.textContent = '?';
                }
                
                container.appendChild(cardElement);
            }
            
            // Получение символа масти
            function getSuitSymbol(suit) {
                switch(suit) {
                    case 'hearts': return '♥';
                    case 'diamonds': return '♦';
                    case 'clubs': return '♣';
                    case 'spades': return '♠';
                    default: return '';
                }
            }
            
            // Обновление очков
            function updateScores(showDealerScore = false) {
                if (showDealerScore || !gameActive) {
                    dealerScoreElement.textContent = calculateScore(dealerCards);
                } else {
                    // Скрываем очки дилера, если игра активна и не показаны все карты
                    const visibleDealerScore = dealerCards.length > 1 ? 
                        calculateScore([dealerCards[1]]) : 0;
                    dealerScoreElement.textContent = visibleDealerScore + ' + ?';
                }
                
                playerScoreElement.textContent = calculateScore(playerCards);
            }
            
            // Обновление баланса
            function updateBalance() {
                balanceElement.textContent = balance;
            }
            
            // Обновление отображения ставки
            function updateBetDisplay() {
                currentBetElement.textContent = currentBet;
            }
            
            // Включение кнопок ставок
            function enableBetButtons() {
                betButtons.forEach(btn => {
                    btn.disabled = false;
                });
            }
            
            // Отключение кнопок ставок
            function disableBetButtons() {
                betButtons.forEach(btn => {
                    btn.disabled = true;
                });
            }
            
            // Добавление ставки
            function addToBet(amount) {
                if (gameActive) return;
                
                if (balance >= amount) {
                    currentBet += amount;
                    balance -= amount;
                    updateBalance();
                    updateBetDisplay();
                    dealBtn.disabled = false;
                    messageElement.textContent = `Ставка: $${currentBet}. Нажмите "Раздать карты"`;
                    messageElement.className = 'message';
                } else {
                    messageElement.textContent = 'Недостаточно средств!';
                    messageElement.className = 'message lose';
                }
            }
            
            // Обработчики событий
            dealBtn.addEventListener('click', dealCards);
            hitBtn.addEventListener('click', hit);
            standBtn.addEventListener('click', stand);
            
            betButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const betAmount = parseInt(btn.getAttribute('data-bet'));
                    addToBet(betAmount);
                });
            });
            
            // Инициализация игры при загрузке
            initGame();
        });
    </script>
</body>
</html>
